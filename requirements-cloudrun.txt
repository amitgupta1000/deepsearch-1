# GCP Cloud Run Requirements for INTELLISEARCH
# Optimized for Python 3.10 on Google Cloud Platform
# Last updated: November 6, 2025

# ============================================================================
# CORE SYSTEM PACKAGES (install first for stability)
# ============================================================================
setuptools>=68.0.0,<69.0.0
wheel>=0.41.0,<1.0.0
pip>=23.0.0,<24.0.0

# ============================================================================
# FOUNDATIONAL PACKAGES (critical base dependencies)
# ============================================================================
requests>=2.31.0,<3.0.0
python-dotenv>=1.0.0,<2.0.0
pydantic>=2.8.0,<3.0.0
nest_asyncio>=1.5.6,<2.0.0

# ============================================================================
# ASYNC & HTTP HANDLING (optimized for Cloud Run)
# ============================================================================
aiohttp>=3.9.0,<4.0.0
aiofiles>=23.2.0,<24.0.0
httpx>=0.25.2,<1.0.0

# ============================================================================
# LANGCHAIN ECOSYSTEM (AI workflow engine)
# ============================================================================
langchain>=1.0.0,<2.0.0
langchain-core>=1.0.0,<2.0.0
langchain-community>=0.4.0,<1.0.0
langchain-text-splitters>=1.0.0,<2.0.0
langgraph>=1.0.0,<2.0.0

# ============================================================================
# GOOGLE CLOUD AI INTEGRATION (primary provider)
# ============================================================================
google-genai>=1.0.0,<2.0.0
langchain-google-genai>=3.0.0,<4.0.0

# Google Cloud client libraries for enhanced integration
google-cloud-core>=2.4.0,<3.0.0
google-auth>=2.23.0,<3.0.0

# ============================================================================
# WEB SCRAPING & CONTENT EXTRACTION
# ============================================================================
beautifulsoup4>=4.12.2,<5.0.0
requests-html>=0.10.0,<1.0.0
lxml>=5.0.0,<6.0.0
trafilatura>=2.0.0,<3.0.0

# ============================================================================
# DOCUMENT PROCESSING & PDF HANDLING
# ============================================================================
PyMuPDF>=1.26.0,<2.0.0
fpdf2>=2.8.0,<3.0.0

# ============================================================================
# SEARCH, RANKING & EMBEDDINGS
# ============================================================================
rank-bm25>=0.2.2,<1.0.0
faiss-cpu>=1.7.4,<2.0.0
sentence-transformers>=3.0.0,<4.0.0

# ============================================================================
# PERFORMANCE & OPTIMIZATION
# ============================================================================
ratelimit>=2.2.1,<3.0.0
# Optimized model downloads for cloud environments
hf_xet>=1.2.0,<2.0.0

# ============================================================================
# WEB FRAMEWORK (for API endpoints)
# ============================================================================
fastapi>=0.104.1,<1.0.0
uvicorn[standard]>=0.24.0,<1.0.0
python-multipart>=0.0.6,<1.0.0

# ============================================================================
# PRODUCTION SERVER (Cloud Run optimized)
# ============================================================================
gunicorn>=21.2.0,<22.0.0

# ============================================================================
# CLOUD RUN SPECIFIC OPTIMIZATIONS
# ============================================================================
# Memory-efficient JSON parsing
orjson>=3.9.0,<4.0.0

# Enhanced logging for Cloud Run
google-cloud-logging>=3.8.0,<4.0.0

# Health check endpoint support
psutil>=5.9.0,<6.0.0

# ============================================================================
# SECURITY & MONITORING (Cloud Run recommended)
# ============================================================================
# Certificate handling for HTTPS requests
certifi>=2023.7.22
# URL parsing and validation
urllib3>=2.0.0,<3.0.0

# Installation Notes for GCP Cloud Run:
# =====================================
# 1. This file is optimized for Python 3.10 on Google Cloud Run
# 2. Version ranges ensure compatibility while allowing security updates
# 3. All dependencies are cloud-ready and tested
# 4. Install with: pip install --no-cache-dir -r requirements-cloudrun.txt
# 5. Cloud Run will automatically use this file during deployment
# 6. Google Cloud client libraries included for enhanced GCP integration